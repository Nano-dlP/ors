{% extends "core/index.html" %}
{% load static %}

{% block page_content %}
<div class="container mt-4">
  <div class="card shadow-sm border-0 rounded">
    <div class="card-header bg-primary text-white">
      <h5 class="mb-0">Buscar Personas</h5>
    </div>
    <div class="card-body">
      
      <!-- Formulario de búsqueda -->
      <form method="get" action="{% url 'persona:persona_search' %}" class="row g-2 mb-3">
        <div class="col-md-10">
          <input 
            type="text" 
            name="buscar_persona" 
            class="form-control" 
            placeholder="Ingrese nombre, apellido o número de documento" 
            
          >
        </div>
        <div class="col-md-2">
          <button type="submit" class="btn btn-primary w-100">Buscar</button>
        </div>
      </form>

      <!-- Resultados -->
      {% if personas %}
        <table class="table table-striped table-hover">
          <thead class="table-light">
            <tr>
              <th>Nombre</th>
              <th>Apellido</th>
              <th>N° Documento</th>
              <th>Email</th>
              <th>Teléfono</th>
            </tr>
          </thead>
          <tbody>
            {% for persona in personas %}
              <tr>
                <td>{{ persona.nombre }}</td>
                <td>{{ persona.apellido }}</td>
                <td>{{ persona.numero_documento }}</td>
                <td>{{ persona.email }}</td>
                <td>{{ persona.telefono }}</td>
                <td>
                    <a href="{% url 'expediente:expediente_create_with_medio' persona.id %}" class="btn btn-success btn-sm">
          Seleccionar
        </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <div class="alert alert-info">
          {% if request.GET.buscar_persona %}
            No se encontraron resultados para <strong>"{{ request.GET.buscar_persona }}"</strong>.
          {% else %}
            Ingrese un término en el buscador para comenzar.
          {% endif %}
        </div>
      {% endif %}

    </div>
  </div>
</div>
{% endblock %}
